(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{110:function(e){e.exports=JSON.parse('{"auth0_domain":"nii.auth0.com","auth0_client_id":"5CKK0oQW6utNG7aQLiwDrBUyiE0tSck6"}')},153:function(e,t,a){e.exports=a(239)},158:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},208:function(e,t,a){},222:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),i=(a(158),a(28)),o=a(25),s=a.n(o),u=a(13),m=(a(160),a(244)),d=a(66),p=a(34),f=(a(161),a(248)),b=a(111),h=a(247),E=a(67),v=a(246),_=a(245),g=(a(162),a(241)),y=function(e){var t=e.name,a=e.size,n=e.color,c=t.split(" ").map((function(e){return e.charAt(0)}));t="".concat(c[0]).concat(c.length>1?c[c.length-1]:"");var l=["#03A9F4","#E91E63","#F44336","#9C27B0","#673AB7","#3F51B5"],i=null==n?l[Math.floor(Math.random()*l.length)]:n;return r.a.createElement(g.a,{style:{backgroundColor:i,verticalAlign:"middle"},size:a},t)},j=(a(208),r.a.createContext({selectedContact:null,setContact:function(){}})),O=_.a.Text,w=function(e){var t=e.contact,a=t.first_name,n=t.last_name,c=t.emails;return r.a.createElement(j.Consumer,null,(function(e){return r.a.createElement("div",{onClick:function(){e.setContact(t)}},r.a.createElement(d.a,null,r.a.createElement(p.a,{span:24,className:"contact-details-container"},r.a.createElement("div",{className:"contact-details"},r.a.createElement(y,{name:a+" "+n,color:"#999999"}),r.a.createElement("div",{className:"contact-name"},r.a.createElement(O,{className:"contact-name__name"},a," ",n),r.a.createElement(O,{className:"contact-name__email"},c[0].email))))),r.a.createElement("div",{className:"divider div-transparent"}))}))},C=a(75),N=a(31),k=a(32),S=a.n(k);function x(){var e=Object(N.a)(["\n  query getTwitter($username: String) {\n    get_twitter(username: $username)\n  }\n"]);return x=function(){return e},e}function $(){var e=Object(N.a)(["\n  mutation removeEmail($id: Int!) {\n    delete_emails(where: { id: { _eq: $id } }) {\n      affected_rows\n    }\n  }\n"]);return $=function(){return e},e}function T(){var e=Object(N.a)(["\n  mutation updateEmail($id: Int!, $email: String!) {\n    update_emails(where: { id: { _eq: $id } }\n      _set: {\n        email: $email\n      }\n    ){\n      affected_rows\n    }\n  }\n"]);return T=function(){return e},e}function A(){var e=Object(N.a)(["\n  mutation addEmail($contact_id: Int!, $email: String!) {\n    insert_emails(objects: { contact_id: $contact_id, email: $email }) {\n      returning {\n        id\n        contact_id\n        email\n      }\n    }\n  }\n"]);return A=function(){return e},e}function P(){var e=Object(N.a)(["\n  mutation removePhoneNumber($id: Int!) {\n    delete_phone_numbers(where: { id: { _eq: $id } }) {\n      affected_rows\n    }\n  }\n"]);return P=function(){return e},e}function q(){var e=Object(N.a)(["\n  mutation updatePhoneNumber($id: Int!, $phone_number: String!) {\n    update_phone_numbers(where: { id: { _eq: $id } }\n      _set: {\n        phone_number: $phone_number\n      }\n    ){\n      affected_rows\n    }\n  }\n"]);return q=function(){return e},e}function I(){var e=Object(N.a)(["\n  mutation addPhoneNumber($contact_id: Int!, $phone_number: String!) {\n    insert_phone_numbers(\n      objects: { contact_id: $contact_id, phone_number: $phone_number }\n    ) {\n      returning {\n        id\n        contact_id\n        phone_number\n      }\n    }\n  }\n"]);return I=function(){return e},e}function Q(){var e=Object(N.a)(["\n  mutation removeContact($id: Int!) {\n    delete_contacts(where: { id: { _eq: $id } }) {\n      affected_rows\n    }\n  }\n"]);return Q=function(){return e},e}function R(){var e=Object(N.a)(["\n  mutation updateUser(\n    $id: Int!\n    $first_name: String!\n    $last_name: String!\n    $twitter: String\n  ) {\n    update_contacts(\n      where: { id: { _eq: $id } }\n      _set: {\n        first_name: $first_name\n        last_name: $last_name\n        twitter: $twitter\n      }\n    ) {\n      affected_rows\n    }\n  }\n"]);return R=function(){return e},e}function z(){var e=Object(N.a)(["\n  mutation addContact(\n    $first_name: String!\n    $last_name: String!\n    $twitter: String\n    $emails: [emails_insert_input!]!\n    $phone_numbers: [phone_numbers_insert_input!]!\n  ) {\n    insert_contacts(\n      objects: {\n        first_name: $first_name\n        last_name: $last_name\n        twitter: $twitter\n        emails: { data: $emails }\n        phone_numbers: { data: $phone_numbers }\n      }\n    ) {\n      returning {\n        last_name\n        id\n        first_name\n        twitter\n        emails {\n          id\n          contact_id\n          email\n        }\n        phone_numbers {\n          id\n          phone_number\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}function D(){var e=Object(N.a)(["\n  query getMyContacts {\n    contacts(order_by: {first_name: asc, last_name: asc}) {\n      id\n      first_name\n      last_name\n      twitter\n      emails {\n        id\n        email\n      }\n      phone_numbers {\n        id\n        phone_number\n      }\n    }\n  }\n"]);return D=function(){return e},e}var L=S()(D()),V=S()(z()),B=S()(R()),W=S()(Q()),F=S()(I()),U=S()(q()),Y=S()(P()),J=S()(A()),M=S()(T()),K=S()($()),Z=S()(x()),G=(a(222),a(64)),H=a(14),X=function(e){var t=e.icon,a=e.color,n=e.onClick,c=e.loading;return r.a.createElement(G.a,{className:"icon-button",onClick:n?function(){n()}:function(){},loading:c},c?null:r.a.createElement(H.a,{type:t,style:{color:a}}))},ee=a(150),te=a(139),ae=a.n(te),ne=function(){return window.history.replaceState({},document.title,window.location.pathname)},re=r.a.createContext(),ce=function(){return Object(n.useContext)(re)},le=_.a.Title,ie=_.a.Text,oe=function(){var e=ce(),t=e.logout,a=e.user;return r.a.createElement(d.a,null,r.a.createElement(p.a,{span:24,className:"user-details-container"},r.a.createElement("div",{className:"user-details"},a.picture?r.a.createElement(g.a,{size:"large",src:a.picture}):r.a.createElement(y,{name:"John Doe",size:"large"}),r.a.createElement("div",{className:"header-name"},r.a.createElement(le,{className:"header-name__name",level:3},a.name),r.a.createElement(ie,{className:"header-name__email"},a.nickname))),r.a.createElement(X,{icon:"logout",onClick:function(){return t()},color:"#2196F3"})))},se=r.a.createContext({contacts:[],setContacts:function(){}}),ue=f.a.Search,me=b.a.TabPane,de=function(){var e=Object(C.b)(L),t=e.data,a=e.loading,c=e.error,l=Object(n.useContext)(se),i=l.contacts,o=l.setContacts,s=Object(n.useState)(),m=Object(u.a)(s,2),p=m[0],f=m[1],_=Object(n.useState)(!1),g=Object(u.a)(_,2),y=g[0],j=g[1];return Object(n.useEffect)((function(){t&&t.contacts&&o(t.contacts)}),[t,o]),r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(oe,null),r.a.createElement(d.a,{className:"recents"},r.a.createElement(b.a,{defaultActiveKey:"1"},r.a.createElement(me,{tab:"Contacts",key:"1"},r.a.createElement(ue,{placeholder:"Type a name to search for a contact",onChange:function(e){return function(e){var t=e.target.value;if(""===t)j(!1);else{var a=i.filter((function(e){return-1!==(e.first_name+" "+e.last_name).toLowerCase().search(t.toLowerCase())}));j(!0),f(a)}}(e)}}),r.a.createElement("div",{className:"contacts"},a?r.a.createElement(h.a,{avatar:!0,paragraph:{rows:1}}):!a&&t?0===i.length?r.a.createElement(E.a,null):y?p.map((function(e){return r.a.createElement(w,{key:e.id,contact:e})})):i.map((function(e){return r.a.createElement(w,{key:e.id,contact:e})})):void(c&&v.a.error({message:"Error",description:"There was a problem fetching contacts"})))))))},pe=a(50),fe=a(47),be=(a(235),a(63)),he=a.n(be),Ee=a(249),ve=a(242),_e=a(76),ge=_.a.Title,ye=_.a.Text,je=function(e){var t=e.twitterLink,a=Object(n.useContext)(j),c=a.selectedContact,l=a.setContact,i=Object(C.a)(W),o=Object(u.a)(i,2),s=o[0],m=o[1].loading;return r.a.createElement(d.a,{className:"main-content-header"},r.a.createElement(p.a,{span:24},null==c?r.a.createElement("div",null,r.a.createElement(ge,{level:2,className:"main-content-header-title"},"Add new"),r.a.createElement(ye,{type:"secondary"},"Add a new contact to your address book")):r.a.createElement("div",{className:"main-content-header-items"},r.a.createElement(ge,{level:2,className:"main-content-header-title"},c.first_name+" "+c.last_name),r.a.createElement("div",{className:"buttons"},r.a.createElement(ve.a,{placement:"rightBottom",title:"Are you sure you want to delete this contact?",onConfirm:function(){null!=c&&s({variables:{id:c.id},optimisticResponse:null,update:function(e){var t=e.readQuery({query:L}).contacts.filter((function(e){return e.id!==c.id}));l(null),e.writeQuery({query:L,data:{contacts:t}})}})},okText:"Yes",cancelText:"No"},r.a.createElement(X,{icon:"delete",color:"red",loading:m})),t?r.a.createElement(_e.a,{placement:"top",title:c.twitter},r.a.createElement("a",{href:null!=t?t:"#",rel:"noopener noreferrer",target:"_blank"},r.a.createElement(X,{icon:"twitter",color:"#00aced"}))):""))))},Oe=_.a.Text,we=function(e){var t=e.selectedContact,a=e.twitterLink;return r.a.createElement(Ee.a,{className:"main-content-contact-details mb-2"},r.a.createElement(g.a,{size:120,icon:"user",style:{backgroundColor:"#03a9f4",margin:"0 auto"}}),r.a.createElement(Oe,{className:"main-content-contact-name"},t?"".concat(t.first_name?t.first_name:""," ").concat(t.last_name?t.last_name:""):"N/A"),r.a.createElement(Oe,null,t&&t.emails&&t.emails.length>0?t.emails[0].email:"N/A"),r.a.createElement(Oe,null,r.a.createElement(H.a,{type:"twitter"})," ",t&&""!==t.twitter?r.a.createElement("a",{href:a||void 0,rel:"noopener noreferrer",target:"_blank"},null===t||void 0===t?void 0:t.twitter):"N/A"))},Ce=a(57),Ne=a(58),ke=a(60),Se=a(59),xe=a(61),$e=(a(236),function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}),Te=function(e){return/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/.test(e)},Ae=a(243),Pe=_.a.Text,qe=function(e){function t(){var e,a;Object(Ce.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(ke.a)(this,(e=Object(Se.a)(t)).call.apply(e,[this].concat(r)))).state={contact:{},emailValue:"",phoneValue:"",emailError:null,phonError:null,fNameError:null,lNameError:null},a.onInputChange=function(e){var t=e.target,n=t.name,r=t.value;"first_name"===n?a.setState({fNameError:null}):"last_name"===n&&a.setState({lNameError:null}),a.setState({contact:Object(i.a)({},a.state.contact,Object(fe.a)({},n,r))})},a.onEmailInputChange=function(e){var t=e.target.value;a.setState({emailValue:t})},a.onEmailAdd=function(e){a.setState({emailError:null});var t=e.target.value,n=a.state.contact,r=t;$e(r)?null!==n.emails&&he.a.find(n.emails,{email:r})?a.setState({emailError:"You have already entered this email"}):a.setState({contact:Object(i.a)({},n,{emails:void 0!==n.emails||null!=n.emails?[].concat(Object(pe.a)(n.emails),[{email:r}]):[{email:r}]}),emailValue:""}):a.setState({emailError:"Enter a valid email"})},a.onEmailDelete=function(e){var t;null!=a.state.contact&&a.setState(Object(i.a)({},null===(t=a.state.contact.emails)||void 0===t?void 0:t.splice(e,1)))},a.onPhoneInputChange=function(e){var t=e.target.value;a.setState({phoneValue:t})},a.onPhoneNumberAdd=function(e){a.setState({phonError:null});var t=e.target.value,n=a.state.contact,r=t;Te(r)?null!==n.phone_numbers&&he.a.find(n.phone_numbers,{phone_number:r})?a.setState({phonError:"You have already entered this phone number"}):a.setState({contact:Object(i.a)({},n,{phone_numbers:void 0!==n.phone_numbers||null!=n.phone_numbers?[].concat(Object(pe.a)(n.phone_numbers),[{phone_number:r}]):[{phone_number:r}]}),phoneValue:""}):a.setState({phonError:"Enter a valid phone number"})},a.onPhoneNumberDelete=function(e){var t;null!=a.state.contact&&a.setState(Object(i.a)({},null===(t=a.state.contact.phone_numbers)||void 0===t?void 0:t.splice(e,1)))},a.convertStringToObject=function(e,t){var a=e.trim().split(","),n=[],r=!0,c=!1,l=void 0;try{for(var i,o=a[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;if(""!==s){var u=Object(fe.a)({},t,s);n.push(u)}}}catch(m){c=!0,l=m}finally{try{r||null==o.return||o.return()}finally{if(c)throw l}}return n},a.save=function(e){var t=a.state.contact,n=t.emails,r=t.first_name,c=t.last_name,l=t.phone_numbers,i=!1;void 0!==r&&""!==r||(i=!0,a.setState({fNameError:"Enter a first name"})),void 0!==c&&""!==c||(i=!0,a.setState({lNameError:"Enter a last name"})),void 0!==n&&0!==(null===n||void 0===n?void 0:n.length)||(i=!0,a.setState({emailError:"Provide at least one email address"})),void 0!==l&&0!==(null===l||void 0===l?void 0:l.length)||(i=!0,a.setState({phonError:"Provide at least one phone number"})),i||e()},a.onContactAdded=function(e,t){v.a.open({message:"Done",description:"Contact has been updated"});var n=e.readQuery({query:L});e.writeQuery({query:L,data:{contacts:[t.insert_contacts.returning[0]].concat(Object(pe.a)(n.contacts))}}),a.setState({contact:{},emailValue:"",phoneValue:"",emailError:null,phonError:null,fNameError:null,lNameError:null})},a}return Object(xe.a)(t,e),Object(Ne.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.contact,n=t.emailValue,c=t.emailError,l=t.phoneValue,i=t.phonError,o=t.fNameError,s=t.lNameError;return r.a.createElement("div",null,r.a.createElement(d.a,{gutter:20},r.a.createElement(p.a,{span:16},r.a.createElement(Ee.a,{title:"Fill this form to add a contact"},r.a.createElement(d.a,{gutter:10},r.a.createElement(p.a,{span:8,className:"custom-input-field"},r.a.createElement("label",null,"First name ",r.a.createElement(Pe,{type:"danger"},"*")),r.a.createElement(f.a,{className:"custom-input",name:"first_name",onChange:this.onInputChange,value:a.first_name}),r.a.createElement(Pe,{type:"danger"},r.a.createElement("i",null,o))),r.a.createElement(p.a,{span:8,className:"custom-input-field mb-3"},r.a.createElement("label",null,"Last name ",r.a.createElement(Pe,{type:"danger"},"*")),r.a.createElement(f.a,{className:"custom-input",name:"last_name",onChange:this.onInputChange,value:a.last_name}),r.a.createElement(Pe,{type:"danger"},r.a.createElement("i",null,s))),r.a.createElement(p.a,{span:8,className:"custom-input-field"},r.a.createElement("label",null,"Twitter"),r.a.createElement(f.a,{className:"custom-input",name:"twitter",onChange:this.onInputChange,value:a.twitter}))),r.a.createElement(d.a,{gutter:10},r.a.createElement(p.a,{span:12,className:"custom-input-field"},r.a.createElement("label",null,"Phone Numbers ",r.a.createElement(Pe,{type:"danger"},"*")),r.a.createElement("div",{className:"tag-container"},a.phone_numbers&&a.phone_numbers.length>0?a.phone_numbers.map((function(t,a){return r.a.createElement("div",{key:a,className:"tag-item"},r.a.createElement(Pe,null,t.phone_number),r.a.createElement(H.a,{type:"close",className:"tag-icon",onClick:function(){return e.onPhoneNumberDelete(a)}}))})):r.a.createElement(G.a,{disabled:!0,type:"dashed"},"No numbers added")),r.a.createElement(f.a,{className:"custom-input",onChange:function(t){return e.onPhoneInputChange(t)},value:l,onPressEnter:function(t){return e.onPhoneNumberAdd(t)}}),i?r.a.createElement(Pe,{type:"danger"},r.a.createElement("i",null,i)):r.a.createElement(Pe,{type:"secondary"},r.a.createElement("i",null,"(Enter a number and hit Enter to add)"))),r.a.createElement(p.a,{span:12,className:"custom-input-field"},r.a.createElement("label",null,"Emails ",r.a.createElement(Pe,{type:"danger"},"*")),r.a.createElement("div",{className:"tag-container"},a.emails&&a.emails.length>0?a.emails.map((function(t,a){return r.a.createElement("div",{key:a,className:"tag-item"},r.a.createElement(Pe,null,t.email),r.a.createElement(H.a,{type:"close",className:"tag-icon",onClick:function(){return e.onEmailDelete(a)}}))})):r.a.createElement(G.a,{disabled:!0,type:"dashed"},"No emails added")),r.a.createElement(f.a,{className:"custom-input",onChange:function(t){return e.onEmailInputChange(t)},value:n,onPressEnter:function(t){return e.onEmailAdd(t)}}),c?r.a.createElement(Pe,{type:"danger"},r.a.createElement("i",null,c)):r.a.createElement(Pe,{type:"secondary"},r.a.createElement("i",null,"(Enter an email and hit Enter to add)")))),r.a.createElement(Ae.a,{mutation:V,variables:a,update:function(t,a){var n=a.data;e.onContactAdded(t,n)}},(function(t,a){return r.a.createElement("div",null,r.a.createElement(G.a,{type:"primary",className:"save-button",loading:a.loading,onClick:function(){return e.save(t)}},"Save"),a.error?v.a.error({message:"Error",description:"Could not save the contact"}):"")})))),r.a.createElement(p.a,{span:8},r.a.createElement(we,{selectedContact:a}))))}}]),t}(n.Component),Ie=(a(237),function(e){var t=e.onClick,a=e.icon,n=e.tooltipText;return r.a.createElement(_e.a,{placement:"top",title:n},r.a.createElement("div",{className:"fab-container",onClick:t?function(){return t()}:function(){return null}},r.a.createElement(H.a,{type:a})))}),Qe=_.a.Title,Re=_.a.Text,ze=function(){var e,t=Object(n.useContext)(j),a=t.selectedContact,c=t.setContact,l=r.a.useContext(se).contacts,o=Object(n.useState)(!1),s=Object(u.a)(o,2),m=s[0],b=s[1],h=Object(n.useState)(),E=Object(u.a)(h,2),_=E[0],g=E[1],y=Object(n.useState)(),O=Object(u.a)(y,2),w=O[0],N=O[1],k=Object(n.useState)(!1),S=Object(u.a)(k,2),x=S[0],$=S[1],T=Object(n.useState)(!1),A=Object(u.a)(T,2),P=A[0],q=A[1],I=Object(n.useState)(),Q=Object(u.a)(I,2),R=Q[0],z=Q[1],D=Object(n.useState)(),V=Object(u.a)(D,2),W=V[0],X=V[1],ee=Object(n.useState)(),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(),ce=Object(u.a)(re,2),le=ce[0],ie=ce[1],oe=Object(C.a)(B),ue=Object(u.a)(oe,2),me=ue[0],de=ue[1].loading,be=Object(C.a)(Y),_e=Object(u.a)(be,1)[0],ge=Object(C.a)(K),ye=Object(u.a)(ge,1)[0],Oe=Object(C.a)(F),Ce=Object(u.a)(Oe,2),Ne=Ce[0],ke=Ce[1],Se=Object(C.a)(J),xe=Object(u.a)(Se,2),Ae=xe[0],Pe=xe[1],ze=Object(C.a)(U),De=Object(u.a)(ze,1)[0],Le=Object(C.a)(M),Ve=Object(u.a)(Le,1)[0],Be=Object(C.b)(Z,{variables:{username:a?a.twitter:null}});Object(n.useEffect)((function(){a&&g(Object(i.a)({},a)),Be.data&&N(Be.data.get_twitter)}),[a,Be]),a&&(e=he.a.find(l,["id",null===a||void 0===a?void 0:a.id]));var We=function(t){var a,n,r,c=t.target,l=c.value,o=c.name,s=Object(i.a)({},_,Object(fe.a)({},o,l));null===e||(null===(a=e)||void 0===a?void 0:a.first_name)!==(null===s||void 0===s?void 0:s.first_name)||(null===(n=e)||void 0===n?void 0:n.twitter)!==(null===s||void 0===s?void 0:s.twitter)&&void 0!==s.twitter||(null===(r=e)||void 0===r?void 0:r.last_name)!==(null===s||void 0===s?void 0:s.last_name)?b(!0):b(!1),g(s)},Fe=function(e){var t=e.target,a=t.value,n=t.name;"email"===n?X(a):"phone"===n&&z(a)},Ue=function(){g(he.a.find(l,["id",null===_||void 0===_?void 0:_.id])),b(!1)},Ye=function(){me({variables:{id:null===_||void 0===_?void 0:_.id,first_name:null===_||void 0===_?void 0:_.first_name,last_name:null===_||void 0===_?void 0:_.last_name,twitter:null===_||void 0===_?void 0:_.twitter},optimisticResponse:null,update:function(e){v.a.open({message:"Done",description:"Contact has been updated"});var t=e.readQuery({query:L}).contacts.map((function(e){if(_&&e.id===_.id){var t=Object(i.a)({},e,{first_name:_.first_name,last_name:_.last_name,twitter:_.twitter});return c(t),t}return e}));e.writeQuery({query:L,data:{contacts:t}})}})},Je=function(){ie(null),a&&(Te(R)?Ne({variables:{contact_id:null===a||void 0===a?void 0:a.id,phone_number:R},optimisticResponse:null,update:function(e,t){var n=t.data;v.a.open({message:"Done",description:"Phone number has been added"});var r=e.readQuery({query:L}).contacts.map((function(e){if(a&&e.id===a.id){var t=n.insert_phone_numbers.returning[0];e.phone_numbers=[].concat(Object(pe.a)(e.phone_numbers),[{__typename:"phone_numbers_insert_input",id:t.id,phone_number:t.phone_number,contact_id:t.contact_id}]),c(e)}return $(!1),e}));e.writeQuery({query:L,data:{contacts:r}})}}):ie("Enter a valid phone number"))},Me=function(){ne(null),a&&($e(W)?Ae({variables:{contact_id:null===a||void 0===a?void 0:a.id,email:W},optimisticResponse:null,update:function(e,t){var n=t.data;v.a.open({message:"Done",description:"Phone number has been added"});var r=e.readQuery({query:L}).contacts.map((function(e){if(a&&e.id===a.id){var t=n.insert_emails.returning[0];e.emails=[].concat(Object(pe.a)(e.emails),[{__typename:"emails_insert_input",id:t.id,email:t.email}]),c(e)}return q(!1),e}));e.writeQuery({query:L,data:{contacts:r}})}}):ne("Enter a valid phone number"))};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(je,{twitterLink:w}),r.a.createElement("div",{className:"main-content-body"},a&&_?r.a.createElement("div",{className:"contact-details-area"},r.a.createElement(d.a,{gutter:20},r.a.createElement(p.a,{span:8},r.a.createElement(Qe,{level:4},"Contact Info"),r.a.createElement(we,{selectedContact:a,twitterLink:w})),r.a.createElement(p.a,{span:16},r.a.createElement(Qe,{level:4},"Edit details"),r.a.createElement(d.a,{gutter:16},r.a.createElement(p.a,{span:12,className:"custom-input-field"},r.a.createElement("label",null,"First name"),r.a.createElement(f.a,{value:_.first_name,className:"custom-input",onChange:We,name:"first_name"})),r.a.createElement(p.a,{span:12,className:"custom-input-field mb-3"},r.a.createElement("label",null,"Last name"),r.a.createElement(f.a,{value:_.last_name,className:"custom-input",onChange:We,name:"last_name"})),r.a.createElement(p.a,{span:24,className:"custom-input-field"},r.a.createElement("label",null,"Twitter"),r.a.createElement(f.a,{value:_.twitter?_.twitter:void 0,className:"custom-input",onChange:We,name:"twitter"}))),r.a.createElement(G.a,{type:"primary",className:"save-button",disabled:!m,onClick:Ye,loading:de},"Save"),m?r.a.createElement(G.a,{className:"save-button",onClick:Ue},"Reset"):null)),r.a.createElement(d.a,{gutter:20},r.a.createElement(p.a,{span:8},r.a.createElement(Ee.a,{title:"Phone numbers",className:"mb-1",headStyle:{backgroundColor:"#fafafa"},actions:[r.a.createElement(H.a,{type:x?"close":"plus",key:"phone_add",onClick:function(){return $(!x)}})]},a.phone_numbers.map((function(e,t){return r.a.createElement("div",{className:"deletable-item",key:t},r.a.createElement("div",{style:{width:"90%"}},r.a.createElement(Re,{editable:{onChange:function(t){var n,r;(r=t)!==(n=e).phone_number&&(Te(r)?De({variables:{id:n.id,phone_number:r},optimisticResponse:null,update:function(e){v.a.success({message:"Phone number edited"});var t=e.readQuery({query:L}).contacts.map((function(e){return a&&e.id===a.id&&(e.phone_numbers.map((function(e){return e.id===n.id&&(e.phone_number=r),e})),c(e)),e}));e.writeQuery({query:L,data:{contacts:t}})}}):v.a.error({message:"Invalid phone number provided",placement:"bottomRight",duration:1.5}))}},className:"deletable-text"},e.phone_number)),a.phone_numbers.length>1?r.a.createElement(ve.a,{placement:"rightBottom",title:"Are you sure you want to remove this phone number?",onConfirm:function(){var t;(t=e.id)&&_e({variables:{id:t},optimisticResponse:null,update:function(e){var n=e.readQuery({query:L}).contacts.map((function(e){return a&&e.id===a.id&&(e.phone_numbers=e.phone_numbers.filter((function(e){return e.id!==t})),c(e)),e}));e.writeQuery({query:L,data:{contacts:n}})}})},okText:"Yes",cancelText:"No"},r.a.createElement(G.a,{icon:"delete",type:"danger",shape:"circle",size:"small"})):null)})),x?r.a.createElement("div",{className:"custom-input-field"},r.a.createElement("label",null,"Phone"),r.a.createElement(d.a,null,r.a.createElement(p.a,{span:20},r.a.createElement(f.a,{className:"custom-input",value:R,name:"phone",onChange:Fe})),r.a.createElement(G.a,{type:"ghost",icon:"check",style:{float:"right"},loading:ke.loading,onClick:Je})),le?r.a.createElement(Re,{type:"danger"},r.a.createElement("i",null,le)):null):null)),r.a.createElement(p.a,{span:8},r.a.createElement(Ee.a,{title:"Email addresses",headStyle:{backgroundColor:"#fafafa"},actions:[r.a.createElement(H.a,{type:P?"close":"plus",key:"email_add",onClick:function(){return q(!P)}})]},a.emails.map((function(e,t){return r.a.createElement("div",{className:"deletable-item",key:t},r.a.createElement(Re,{editable:{onChange:function(t){return r=t,void((n=e).email!==r&&($e(r)?Ve({variables:{id:n.id,email:r},optimisticResponse:null,update:function(e){v.a.success({message:"Email address updated"});var t=e.readQuery({query:L}).contacts.map((function(e){return a&&e.id===a.id&&(e.emails.map((function(e){return n.id===e.id&&(e.email=r),e})),c(e)),e}));e.writeQuery({query:L,data:{contacts:t}})}}):v.a.error({message:"Invalid email address provided",placement:"bottomRight",duration:1.5})));var n,r}},className:"deletable-text"},e.email),a.emails.length>1?r.a.createElement(ve.a,{placement:"rightBottom",title:"Are you sure you want to remove this email address?",onConfirm:function(){var t;(t=e.id)&&ye({variables:{id:t},optimisticResponse:null,update:function(e){var n=e.readQuery({query:L}).contacts.map((function(e){return a&&e.id===a.id&&(e.emails=e.emails.filter((function(e){return e.id!==t}))),e}));e.writeQuery({query:L,data:{contacts:n}})}})},okText:"Yes",cancelText:"No"},r.a.createElement(G.a,{icon:"delete",type:"danger",shape:"circle",size:"small"})):null)})),P?r.a.createElement("div",{className:"custom-input-field"},r.a.createElement("label",null,"Email"),r.a.createElement(d.a,null,r.a.createElement(p.a,{span:20},r.a.createElement(f.a,{className:"custom-input",value:W,name:"email",onChange:Fe})),r.a.createElement(G.a,{type:"ghost",icon:"check",style:{float:"right"},onClick:Me,loading:Pe.loading})),le?r.a.createElement(Re,{type:"danger"},r.a.createElement("i",null,ae)):null):null)))):r.a.createElement(qe,null)),a?r.a.createElement(Ie,{icon:"user-add",onClick:function(){return c(null)},tooltipText:"Add new contact"}):""))},De=function(e){function t(){var e,a;Object(Ce.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(ke.a)(this,(e=Object(Se.a)(t)).call.apply(e,[this].concat(r)))).state={selectedContact:null,setContact:function(e){a.setState({selectedContact:e})}},a}return Object(xe.a)(t,e),Object(Ne.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),Le=function(e){function t(){var e,a;Object(Ce.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(ke.a)(this,(e=Object(Se.a)(t)).call.apply(e,[this].concat(r)))).state={contacts:[],setContacts:function(e){a.setState({contacts:e})}},a}return Object(xe.a)(t,e),Object(Ne.a)(t,[{key:"render",value:function(){return r.a.createElement(se.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),Ve=a(43),Be=a(148),We=a(149),Fe=a(18),Ue=a(146),Ye=(a(238),_.a.Paragraph),Je=_.a.Title,Me=function(){var e=ce().loginWithRedirect;return r.a.createElement("div",{className:"hero-main"},r.a.createElement(Ee.a,{className:"hero-content-card"},r.a.createElement(Je,{className:"hero-title"},"Happy Contacts"),r.a.createElement(Ye,{type:"secondary",className:"subtitle"},"Manage all your contacts from one place, anywhere you are regardless of your device"),r.a.createElement(G.a,{type:"primary",size:"large",onClick:e},"Login"),r.a.createElement(G.a,{className:"signup-button",size:"large",onClick:e},"Sign up")))};var Ke=function(){var e=ce(),t=e.isAuthenticated,a=e.loading,c=e.getIdTokenClaims,l=Object(n.useState)(""),o=Object(u.a)(l,2),f=o[0],b=o[1];if(a)return r.a.createElement("div",{className:"fullscreen-loader"},r.a.createElement(m.a,{size:"large"}));!function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.awrap(c());case 3:e=t.sent,b(e.__raw),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}();var h=new Be.a,E=new We.a({uri:"https://happy-contacts.herokuapp.com/v1/graphql"}),v=Object(Ue.a)((function(e,t){var a=t.headers,n=f;return n?{headers:Object(i.a)({},a,{authorization:"Bearer ".concat(n)})}:{headers:Object(i.a)({},a)}})),_=new Ve.a({cache:h,link:v.concat(E)});return t?r.a.createElement(Fe.a,{client:_},r.a.createElement(Le,null,r.a.createElement(De,null,r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement(p.a,{span:6},r.a.createElement(de,null)),r.a.createElement(p.a,{span:18},r.a.createElement(ze,null))))))):r.a.createElement(Me,null)},Ze=a(110);l.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?ne:a,l=Object(ee.a)(e,["children","onRedirectCallback"]),i=Object(n.useState)(),o=Object(u.a)(i,2),m=o[0],d=o[1],p=Object(n.useState)(),f=Object(u.a)(p,2),b=f[0],h=f[1],E=Object(n.useState)(),v=Object(u.a)(E,2),_=v[0],g=v[1],y=Object(n.useState)(!0),j=Object(u.a)(y,2),O=j[0],w=j[1],C=Object(n.useState)(!1),N=Object(u.a)(C,2),k=N[0],S=N[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,r;s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.awrap(ae()(l));case 2:if(e=i.sent,g(e),!window.location.search.includes("code=")){i.next=10;break}return i.next=7,s.a.awrap(e.handleRedirectCallback());case 7:t=i.sent,a=t.appState,c(a);case 10:return i.next=12,s.a.awrap(e.isAuthenticated());case 12:if(n=i.sent,d(n),!n){i.next=19;break}return i.next=17,s.a.awrap(e.getUser());case 17:r=i.sent,h(r);case 19:w(!1);case 20:case"end":return i.stop()}}))}()}),[]);return r.a.createElement(re.Provider,{value:{isAuthenticated:m,user:b,loading:O,popupOpen:k,loginWithPopup:function(){var e,t,a=arguments;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},S(!0),n.prev=2,n.next=5,s.a.awrap(_.loginWithPopup(e));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:return n.prev=10,S(!1),n.finish(10);case 13:return n.next=15,s.a.awrap(_.getUser());case 15:t=n.sent,h(t),d(!0);case 18:case"end":return n.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),t.next=3,s.a.awrap(_.handleRedirectCallback());case 3:return t.next=5,s.a.awrap(_.getUser());case 5:e=t.sent,w(!1),d(!0),h(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return _.getIdTokenClaims.apply(_,arguments)},loginWithRedirect:function(){return _.loginWithRedirect.apply(_,arguments)},getTokenSilently:function(){return _.getTokenSilently.apply(_,arguments)},getTokenWithPopup:function(){return _.getTokenWithPopup.apply(_,arguments)},logout:function(){return _.logout.apply(_,arguments)}}},t)}),{domain:Ze.auth0_domain,client_id:Ze.auth0_client_id,redirect_uri:window.location.origin},r.a.createElement(Ke,null)),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.95c79c67.chunk.js.map